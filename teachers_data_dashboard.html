<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Teacher Dashboard</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.21.2/babel.min.js"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    // Sample data
    const teacherData = {
      id: "T1001",
      name: "Dr. Sarah Johnson",
      department: "Computer Science",
      email: "sjohnson@university.edu",
      phone: "(555) 123-4567",
      subjects: [
        { id: "CS101", name: "Introduction to Programming", students: 24 },
        { id: "CS305", name: "Data Structures", students: 20 },
        { id: "CS410", name: "Web Development", students: 18 }
      ]
    };

    const studentsData = {
      "CS101": [
        { id: "S1001", name: "Alice Brown", attendance: [1, 1, 0, 1, 1, 1, 0, 1] },
        { id: "S1002", name: "Bob Chen", attendance: [1, 1, 1, 1, 0, 1, 1, 1] },
        { id: "S1003", name: "Carlos Diaz", attendance: [1, 0, 0, 1, 1, 1, 1, 1] },
        { id: "S1004", name: "Dana Evans", attendance: [1, 1, 1, 1, 1, 0, 1, 1] },
        { id: "S1005", name: "Emma Foster", attendance: [0, 1, 1, 1, 1, 1, 1, 0] },
        { id: "S1006", name: "Frank Garcia", attendance: [1, 1, 1, 0, 1, 1, 0, 1] },
        { id: "S1007", name: "Grace Huang", attendance: [1, 1, 1, 1, 1, 1, 1, 1] },
        { id: "S1008", name: "Henry Ibrahim", attendance: [0, 0, 1, 1, 1, 0, 1, 1] },
        { id: "S1009", name: "Ivy Jackson", attendance: [1, 1, 1, 1, 0, 1, 1, 0] },
        { id: "S1010", name: "Jack Kumar", attendance: [1, 1, 0, 1, 1, 1, 1, 1] },
        { id: "S1011", name: "Karen Lee", attendance: [1, 0, 1, 1, 1, 1, 0, 1] },
        { id: "S1012", name: "Leo Martinez", attendance: [0, 1, 1, 1, 0, 1, 1, 1] },
        { id: "S1013", name: "Maya Nguyen", attendance: [1, 1, 1, 0, 1, 1, 1, 0] },
        { id: "S1014", name: "Noah Ortiz", attendance: [1, 1, 1, 1, 1, 0, 1, 1] },
        { id: "S1015", name: "Olivia Patel", attendance: [1, 1, 0, 1, 1, 1, 1, 1] },
        { id: "S1016", name: "Parker Quinn", attendance: [0, 1, 1, 1, 1, 1, 0, 1] },
        { id: "S1017", name: "Quinn Rogers", attendance: [1, 1, 1, 1, 0, 1, 1, 1] },
        { id: "S1018", name: "Ryan Smith", attendance: [1, 0, 1, 1, 1, 0, 1, 1] },
        { id: "S1019", name: "Sofia Thompson", attendance: [1, 1, 1, 0, 1, 1, 1, 1] },
        { id: "S1020", name: "Tyler Ueda", attendance: [0, 1, 1, 1, 1, 0, 1, 1] }
      ],
      "CS305": [
        { id: "S2001", name: "Alex Wilson", attendance: [1, 1, 0, 1, 1, 1, 0, 1] },
        { id: "S2002", name: "Blake Young", attendance: [1, 1, 1, 0, 0, 1, 1, 1] },
        { id: "S2003", name: "Casey Zhou", attendance: [0, 0, 1, 1, 1, 1, 1, 0] },
        { id: "S2004", name: "Drew Anderson", attendance: [1, 1, 1, 1, 1, 0, 1, 1] },
        { id: "S2005", name: "Eli Baker", attendance: [1, 1, 0, 1, 1, 1, 1, 0] },
        { id: "S2006", name: "Fiona Clark", attendance: [1, 0, 1, 0, 1, 1, 0, 1] },
        { id: "S2007", name: "Gia Davis", attendance: [1, 1, 1, 1, 0, 1, 1, 1] },
        { id: "S2008", name: "Hassan Edwards", attendance: [0, 0, 1, 1, 1, 0, 1, 1] },
        { id: "S2009", name: "Iris Fisher", attendance: [1, 1, 0, 1, 0, 1, 1, 0] },
        { id: "S2010", name: "Jordan Gray", attendance: [1, 1, 1, 1, 1, 1, 0, 1] },
        { id: "S2011", name: "Kai Hill", attendance: [1, 0, 1, 1, 1, 1, 0, 1] },
        { id: "S2012", name: "Luna Ivanov", attendance: [0, 1, 1, 0, 0, 1, 1, 1] },
        { id: "S2013", name: "Milo Jones", attendance: [1, 1, 1, 0, 1, 1, 1, 0] },
        { id: "S2014", name: "Nina King", attendance: [1, 1, 0, 1, 1, 0, 1, 1] },
        { id: "S2015", name: "Owen Lopez", attendance: [1, 0, 0, 1, 1, 1, 1, 1] },
        { id: "S2016", name: "Penny Miller", attendance: [0, 1, 1, 1, 1, 1, 0, 1] },
        { id: "S2017", name: "Quincy Nelson", attendance: [1, 1, 1, 0, 0, 1, 1, 1] },
        { id: "S2018", name: "Riley Ortega", attendance: [1, 0, 1, 1, 1, 0, 1, 0] },
        { id: "S2019", name: "Sam Phillips", attendance: [1, 1, 1, 0, 1, 1, 1, 1] },
        { id: "S2020", name: "Tara Quinn", attendance: [0, 1, 0, 1, 1, 0, 1, 1] }
      ],
      "CS410": [
        { id: "S3001", name: "Aiden Rivera", attendance: [1, 1, 0, 1, 1, 1, 0, 1] },
        { id: "S3002", name: "Bailey Scott", attendance: [1, 1, 1, 0, 0, 1, 1, 1] },
        { id: "S3003", name: "Cameron Taylor", attendance: [0, 0, 1, 1, 1, 1, 1, 0] },
        { id: "S3004", name: "Dakota Underwood", attendance: [1, 1, 1, 1, 1, 0, 1, 1] },
        { id: "S3005", name: "Elliott Valencia", attendance: [1, 1, 0, 1, 1, 1, 1, 0] },
        { id: "S3006", name: "Finley Washington", attendance: [1, 0, 1, 0, 1, 1, 0, 1] },
        { id: "S3007", name: "Gray Xiong", attendance: [1, 1, 1, 1, 0, 1, 1, 1] },
        { id: "S3008", name: "Harper Yamamoto", attendance: [0, 0, 1, 1, 1, 0, 1, 1] },
        { id: "S3009", name: "Indigo Zhang", attendance: [1, 1, 0, 1, 0, 1, 1, 0] },
        { id: "S3010", name: "Jamie Adams", attendance: [1, 1, 1, 1, 1, 1, 0, 1] },
        { id: "S3011", name: "Kit Bennett", attendance: [1, 0, 1, 1, 1, 1, 0, 1] },
        { id: "S3012", name: "Logan Campbell", attendance: [0, 1, 1, 0, 0, 1, 1, 1] },
        { id: "S3013", name: "Morgan Davidson", attendance: [1, 1, 1, 0, 1, 1, 1, 0] },
        { id: "S3014", name: "Nico Evans", attendance: [1, 1, 0, 1, 1, 0, 1, 1] },
        { id: "S3015", name: "Onyx Fernandez", attendance: [1, 0, 0, 1, 1, 1, 1, 1] },
        { id: "S3016", name: "Paris Graham", attendance: [0, 1, 1, 1, 1, 1, 0, 1] },
        { id: "S3017", name: "Quinn Harrison", attendance: [1, 1, 1, 0, 0, 1, 1, 1] },
        { id: "S3018", name: "Reese Ingram", attendance: [1, 0, 1, 1, 1, 0, 1, 0] },
        { id: "S3019", name: "Skyler Johnson", attendance: [1, 1, 1, 0, 1, 1, 1, 1] },
        { id: "S3020", name: "Taylor Knight", attendance: [0, 1, 0, 1, 1, 0, 1, 1] }
      ]
    };
    
    // User credentials for login
    const userData = {
      email: "teacher1@gmail.com",
      mac: "58-85-a2-1b-71-cf",
      name: "teacher1",
      password: "1234"
    };

    // Generate dates for the last 8 class sessions
    const generateDateLabels = () => {
      const dates = [];
      const today = new Date();
      
      for (let i = 0; i < 8; i++) {
        const date = new Date();
        date.setDate(today.getDate() - (i * 2)); // Class every other day
        dates.unshift(`${date.getMonth() + 1}/${date.getDate()}`);
      }
      
      return dates;
    };

    const classDateLabels = generateDateLabels();

    function TeacherDashboard() {
      const [page, setPage] = React.useState('login');
      const [credentials, setCredentials] = React.useState({ email: '', password: '' });
      const [error, setError] = React.useState('');
      const [selectedSubject, setSelectedSubject] = React.useState(null);
      
      const handleLogin = (e) => {
        e.preventDefault();
        if (credentials.email === userData.email && credentials.password === userData.password) {
          setPage('profile');
          setError('');
        } else {
          setError('Invalid email or password');
        }
      };
      
      const handleInputChange = (e) => {
        setCredentials({
          ...credentials,
          [e.target.name]: e.target.value
        });
      };
      
      const viewSubjectAttendance = (subjectId) => {
        setSelectedSubject(subjectId);
        setPage('attendance');
      };
      
      const calculateAttendance = (attendanceArray) => {
        if (!attendanceArray || attendanceArray.length === 0) return 0;
        const present = attendanceArray.filter(status => status === 1).length;
        return Math.round((present / attendanceArray.length) * 100);
      };
      
      // Renders the login page
      const renderLoginPage = () => {
        return (
          <div className="flex items-center justify-center min-h-screen bg-gray-100">
            <div className="w-full max-w-md p-8 bg-white rounded-lg shadow-lg">
              <div className="text-center mb-8">
                <h1 className="text-2xl font-bold text-gray-800">Teacher Dashboard</h1>
                <p className="text-gray-600">Sign in to access your classes</p>
              </div>
              
              <form onSubmit={handleLogin}>
                {error && (
                  <div className="mb-4 p-3 bg-red-100 text-red-700 rounded-md">
                    {error}
                  </div>
                )}
                
                <div className="mb-6">
                  <label className="block text-gray-700 text-sm font-medium mb-2" htmlFor="email">
                    Email
                  </label>
                  <input
                    id="email"
                    name="email"
                    type="email"
                    className="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                    placeholder="Enter your email"
                    value={credentials.email}
                    onChange={handleInputChange}
                    required
                  />
                </div>
                
                <div className="mb-6">
                  <label className="block text-gray-700 text-sm font-medium mb-2" htmlFor="password">
                    Password
                  </label>
                  <input
                    id="password"
                    name="password"
                    type="password"
                    className="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                    placeholder="Enter your password"
                    value={credentials.password}
                    onChange={handleInputChange}
                    required
                  />
                </div>
                
                <button
                  type="submit"
                  className="w-full py-2 px-4 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50"
                >
                  Sign In
                </button>
              </form>
              
              <div className="mt-6 text-center text-sm text-gray-500">
                <p>Demo credentials: email: "teacher1@gmail.com", password: "1234"</p>
              </div>
            </div>
          </div>
        );
      };
      
      // Renders the teacher profile page with subjects list
      const renderProfilePage = () => {
        return (
          <div className="min-h-screen bg-gray-100">
            <header className="bg-white shadow">
              <div className="max-w-7xl mx-auto px-4 py-6 sm:px-6 lg:px-8 flex justify-between items-center">
                <h1 className="text-2xl font-bold text-gray-800">Teacher Dashboard</h1>
                <button 
                  onClick={() => {
                    setPage('login');
                    setCredentials({ email: '', password: '' });
                  }}
                  className="px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700"
                >
                  Sign Out
                </button>
              </div>
            </header>
            
            <main className="max-w-7xl mx-auto px-4 py-6 sm:px-6 lg:px-8">
              <div className="bg-white rounded-lg shadow-md p-6 mb-6">
                <h2 className="text-xl font-semibold mb-4">Teacher Profile</h2>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div>
                    <p className="text-gray-600">Name</p>
                    <p className="font-medium">{userData.name}</p>
                  </div>
                  <div>
                    <p className="text-gray-600">ID</p>
                    <p className="font-medium">{teacherData.id}</p>
                  </div>
                  <div>
                    <p className="text-gray-600">Department</p>
                    <p className="font-medium">{teacherData.department}</p>
                  </div>
                  <div>
                    <p className="text-gray-600">Email</p>
                    <p className="font-medium">{userData.email}</p>
                  </div>
                  <div>
                    <p className="text-gray-600">MAC Address</p>
                    <p className="font-medium">{userData.mac}</p>
                  </div>
                </div>
              </div>
              
              <div className="bg-white rounded-lg shadow-md p-6">
                <h2 className="text-xl font-semibold mb-4">My Subjects</h2>
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                  {teacherData.subjects.map((subject) => (
                    <div key={subject.id} className="border rounded-lg p-5 hover:shadow-md transition-shadow">
                      <h3 className="text-lg font-medium">{subject.name}</h3>
                      <p className="text-gray-600 mb-4">Code: {subject.id}</p>
                      <p className="text-gray-600 mb-4">Students: {subject.students}</p>
                      <button
                        onClick={() => viewSubjectAttendance(subject.id)}
                        className="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 w-full"
                      >
                        View Attendance
                      </button>
                    </div>
                  ))}
                </div>
              </div>
            </main>
          </div>
        );
      };
      
      // Renders the attendance page for a selected subject
      const renderAttendancePage = () => {
        const students = studentsData[selectedSubject] || [];
        const selectedSubjectName = teacherData.subjects.find(s => s.id === selectedSubject)?.name || '';
        
        return (
          <div className="min-h-screen bg-gray-100">
            <header className="bg-white shadow">
              <div className="max-w-7xl mx-auto px-4 py-6 sm:px-6 lg:px-8 flex justify-between items-center">
                <div>
                  <h1 className="text-2xl font-bold text-gray-800">Attendance: {selectedSubjectName}</h1>
                  <p className="text-gray-600">Course Code: {selectedSubject}</p>
                </div>
                <button 
                  onClick={() => setPage('profile')}
                  className="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"
                >
                  Back to Profile
                </button>
              </div>
            </header>
            
            <main className="max-w-7xl mx-auto px-4 py-6 sm:px-6 lg:px-8">
              <div className="bg-white rounded-lg shadow-md p-6 mb-6">
                <div className="flex justify-between items-center mb-4">
                  <h2 className="text-xl font-semibold">Student Attendance Record</h2>
                  <div className="flex gap-2">
                    <span className="flex items-center text-sm">
                      <span className="inline-block w-3 h-3 bg-green-500 rounded-full mr-1"></span>
                      Present
                    </span>
                    <span className="flex items-center text-sm">
                      <span className="inline-block w-3 h-3 bg-red-500 rounded-full mr-1"></span>
                      Absent
                    </span>
                  </div>
                </div>
                
                <div className="overflow-x-auto">
                  <table className="min-w-full divide-y divide-gray-200">
                    <thead className="bg-gray-50">
                      <tr>
                        <th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                          ID
                        </th>
                        <th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                          Name
                        </th>
                        {classDateLabels.map((date, index) => (
                          <th key={index} scope="col" className="px-2 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">
                            {date}
                          </th>
                        ))}
                        <th scope="col" className="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">
                          %
                        </th>
                      </tr>
                    </thead>
                    <tbody className="bg-white divide-y divide-gray-200">
                      {students.map((student) => (
                        <tr key={student.id} className="hover:bg-gray-50">
                          <td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                            {student.id}
                          </td>
                          <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                            {student.name}
                          </td>
                          {student.attendance.map((status, index) => (
                            <td key={index} className="px-2 py-4 whitespace-nowrap text-center">
                              <span className={`inline-block w-6 h-6 rounded-full ${status ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`}>
                                {status ? '✓' : '✗'}
                              </span>
                            </td>
                          ))}
                          <td className="px-6 py-4 whitespace-nowrap text-center">
                            <span className={`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full 
                              ${calculateAttendance(student.attendance) >= 75 ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`}>
                              {calculateAttendance(student.attendance)}%
                            </span>
                          </td>
                        </tr>
                      ))}
                    </tbody>
                  </table>
                </div>
              </div>
              
              <div className="bg-white rounded-lg shadow-md p-6">
                <h2 className="text-xl font-semibold mb-4">Class Statistics</h2>
                <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
                  <div className="bg-blue-50 p-4 rounded-lg">
                    <h3 className="text-sm font-medium text-blue-800">Total Students</h3>
                    <p className="text-3xl font-bold text-blue-900">{students.length}</p>
                  </div>
                  <div className="bg-green-50 p-4 rounded-lg">
                    <h3 className="text-sm font-medium text-green-800">Average Attendance</h3>
                    <p className="text-3xl font-bold text-green-900">
                      {Math.round(students.reduce((acc, student) => 
                        acc + calculateAttendance(student.attendance), 0) / (students.length || 1))}%
                    </p>
                  </div>
                  <div className="bg-yellow-50 p-4 rounded-lg">
                    <h3 className="text-sm font-medium text-yellow-800">Low Attendance</h3>
                    <p className="text-3xl font-bold text-yellow-900">
                      {students.filter(s => calculateAttendance(s.attendance) < 75).length}
                    </p>
                  </div>
                  <div className="bg-purple-50 p-4 rounded-lg">
                    <h3 className="text-sm font-medium text-purple-800">Perfect Attendance</h3>
                    <p className="text-3xl font-bold text-purple-900">
                      {students.filter(s => !s.attendance.includes(0)).length}
                    </p>
                  </div>
                </div>
              </div>
            </main>
          </div>
        );
      };
      
      // Render the appropriate page based on current state
      switch(page) {
        case 'profile':
          return renderProfilePage();
        case 'attendance':
          return renderAttendancePage();
        default:
          return renderLoginPage();
      }
    }

    // Render the app
    ReactDOM.render(<TeacherDashboard />, document.getElementById('root'));
  </script>
</body>
</html>